<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="public/styles/style.css">
    
</head>
<body>
    <div class="gamecontainer">
    
        <div class="santa">
            <div class="score">Score: 0</div>
            <img class="santaimg santaani" src="public/assets/santaa.png">
        </div>
        
        <div class="gameover"></div>
        <!-- <div class="gift ">
            <img src="public/assets/gift.png" class="giftimg">
        </div> -->
        <div class="lighthouse lighthouseani">
            <img src="public/assets/house1.png" class="lighthouseimg lighthouseani">
        </div>
        <div class="darkhouse">
            <img src="public/assets/darkhouse1.png" class="darkhouseimg lighthouseani">
        </div>

</div>

<div class="card">
    <div class = "santaimg santaani divabove">
    <img class = "star" src="public/assets/gift.png"> </div>
         <!-- <img class="box-front lighthouseani" src="public/assets/box-front-2.png"> -->
    <!-- <img class="box-back lighthouseani box1" src="public/assets/box-back-2.png">
    <img class="box-back lighthouseani box2" src="public/assets/box-back-2.png"> 
  </div> -->
  </div>


<script>
     /* document.addEventListener("keydown", (event) => {
        console.log(event.keyCode);
        if(event.keyCode==32){
            gift = document.querySelector('.giftimg')
gift.classList.add('animategift');
setTimeout(()=>{
gift.classList.remove('animategift')
},200);
        }
       }); */ 

       document.addEventListener("keydown", (event) => {
        
        console.log(event.keyCode);
        if(event.keyCode==32){
            gift = document.querySelector('.star');
            divabove = document.querySelector('.divabove')
            
gift.classList.add('stars');
//divabove.classList.remove('santaani')
setTimeout(()=>{
    gift = document.querySelector('.stars')
gift.classList.remove('stars');

//divabove.classList.add('santaani')
//console.log("check");
},400);
        }
       }); 


     


setInterval(() => {
    gift = document.querySelector('.star');
    gameover = document.querySelector('.gameover');
    box1 = document.querySelector('.lighthouseimg');
    box2 = document.querySelector('.darkhouseimg');
    score = document.querySelector('.score');
    santa = document.querySelector('.santaimg');
    divabove=document.querySelector('.divabove');
    
   
    var rect = gift.getBoundingClientRect();
    //console.log(rect.top, rect.right, rect.bottom, rect.left);
    dy= rect.top;
    dx= rect.left;


    /*console.log('henlo', window.getComputedStyle(gift, null).getPropertyValue('left'));
    console.log(window.getComputedStyle(gift, null).getPropertyValue('top'));
    dx = parseInt(window.getComputedStyle(gift, null).getPropertyValue('left'));
    dy = parseInt(window.getComputedStyle(gift, null).getPropertyValue('top'));*/
    var rect1 = box1.getBoundingClientRect();
    //console.log(rect.top, rect.right, rect.bottom, rect.left);
    oy= rect1.top;
    ox= rect1.left;
    var rect2 = box2.getBoundingClientRect();
    //console.log(rect.top, rect.right, rect.bottom, rect.left);
    gy= rect2.top;
    gx= rect2.left;

    //console.log(gx);
    //console.log(gy);


    /*ox = parseInt(window.getComputedStyle(box1, null).getPropertyValue('left'));
    oy = parseInt(window.getComputedStyle(box1, null).getPropertyValue('top'));
    gx = parseInt(window.getComputedStyle(box2, null).getPropertyValue('left'));
    gy = parseInt(window.getComputedStyle(box2, null).getPropertyValue('top'));*/

    offsetX1 = Math.abs(dx - ox);
    offsetY1 = Math.abs(dy - oy);
    //console.log(rect.left)
    // console.log(rect1.left)
    offsetX1 = Math.
    //if (rect.left== 0) {
     //   console.log('equals');
    //}
    offsetX2 = Math.abs(dx - gx);
    offsetY2 = Math.abs(dy - gy);
   /*console.log(dx);
    console.log(dy);
    console.log(ox);
    console.log(oy);
    console.log(gx);
    console.log(gy);*/
    // console.log(offsetX1, offsetY1);
    // console.log(offsetX2, offsetY2);
    cross=true; 
    //scoreval=0;
    // if (offsetX1 <5  && offsetY1 < 5) {

    if(((rect.left>=rect1.left)&&(rect.left<=(rect1.left+rect1.width))&&(rect.top>=rect1.top)&&(rect.top<=(rect1.top+rect1.height)))) {

    // if(offsetX1 == 0) {
        console.log('becomes 0')
        gameover.innerHTML = "Game Over - Reload to Play Again";
        box1.classList.remove('lighthouseani');
        box2.classList.remove('lighthouseani');
        divabove.classList.remove('santaani');
        santa.classList.remove('santaani');

        
       
    }
    //console.log(rect2.width);
    //console.log(rect2.height);

      if(((rect.left>=rect2.left)&&(rect.left<=(rect2.left+rect2.width))&&(rect.top>=rect2.top)&&(rect.top<=(rect2.top+rect2.height)))) {
        scoreval += 1;
        console.log(scoreval);
        updateScore(scoreval);
        cross = false;
        setTimeout(() => {
            cross = true;
        }, 4000);
      }

      setTimeout(() => {
        anisanta = parseFloat(window.getComputedStyle(santa, null).getPropertyValue('animation-duration'));
        if(anisanta>=1.5)
        {newanisanta = anisanta - 0.0005;}
        santa.style.animationDuration = newanisanta + 's';
        //console.log('New animation duration: ', newanisanta)
    }, 500);

    setTimeout(() => {
        anigift = parseFloat(window.getComputedStyle(divabove, null).getPropertyValue('animation-duration'));
        if(anigift>=1.5)
        {newanigift = anigift - 0.0005;}
        divabove.style.animationDuration = newanigift + 's';
        //console.log('New animation duration: ', newanigift)
    }, 500);

}, 10);

function updateScore(scoreval) {
    score.innerHTML = "Score: " + scoreval;
}
  
</script>
</body>
</html>